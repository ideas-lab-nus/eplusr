<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read, and modify an EnergyPlus Weather File (EPW) — Epw • eplusr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Read, and modify an EnergyPlus Weather File (EPW) — Epw" />

<meta property="og:description" content="Reading an EPW file starts with function read_epw(), which parses an EPW
file and returns an Epw object. The parsing process is extremely inspired
by OpenStudio utilities library
with some simplifications." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eplusr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/eplusr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hongyuanjia/eplusr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read, and modify an EnergyPlus Weather File (EPW)</h1>
    <small class="dont-index">Source: <a href='https://github.com/hongyuanjia/eplusr/blob/master/R/epw.R'><code>R/epw.R</code></a></small>
    <div class="hidden name"><code>Epw.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Reading an EPW file starts with function <code><a href='read_epw.html'>read_epw()</a></code>, which parses an EPW
file and returns an <code>Epw</code> object. The parsing process is extremely inspired
by <a href='https://openstudio-sdk-documentation.s3.amazonaws.com/cpp/OpenStudio-2.5.1-doc/utilities/html/classopenstudio_1_1_epw_file.html'>OpenStudio utilities library</a>
with some simplifications.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>An EPW file can be divided into two parts, headers and weather data.  The
first eight lines of a standard EPW file are normally headers which contains
data of location, design conditions, typical/extreme periods, ground
temperatures, holidays/daylight savings, data periods and other comments. For
now, eplusr only parses headers of location, holidays/daylight savings and
data periods. All other headers are left as they were when parsing and
saving. For details on the data structure of EPW file, please see "Chapter 2 - Weather Converter Program"
in EnergyPlus "Auxiliary Programs" documentation. An online version can be
found <a href='https://bigladdersoftware.com/epx/docs/'>here</a>.</p>
<p>There are about 35 variables in the core weather data. However, not all of
them are used by EnergyPlus. Actually, despite of date and time columns, only
14 columns are used:</p><ol>
<li><p>dry bulb temperature</p></li>
<li><p>dew point temperature</p></li>
<li><p>relative humidity</p></li>
<li><p>atmospheric pressure</p></li>
<li><p>horizontal infrared radiation intensity from sky</p></li>
<li><p>direct normal radiation</p></li>
<li><p>diffuse horizontal radiation</p></li>
<li><p>wind direction</p></li>
<li><p>wind speed</p></li>
<li><p>present weather observation</p></li>
<li><p>present weather codes</p></li>
<li><p>snow depth</p></li>
<li><p>liquid precipitation depth</p></li>
<li><p>liquid precipitation rate</p></li>
</ol>
    <p><strong>NOTE</strong>: Even though <code>Epw</code> class provides methods to replace core weather data,
it is still not recommended.</p>
    
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    <pre>epw &lt;- read_epw(path)
epw$city
epw$city &lt;- "city"
epw$state_province
epw$state_province &lt;- "state_province"
epw$country
epw$country &lt;- "country"
epw$data_source
epw$data_source &lt;- "data_source"
epw$wmo_number
epw$wmo_number &lt;- "wmo_number"
epw$latitude
epw$latitude &lt;- "latitude"
epw$longitute
epw$longitute &lt;- "longitute"
epw$time_zone
epw$time_zone &lt;- "time_zone"
epw$elevation
epw$elevation &lt;- "elevation"
epw$time_step
epw$time_step &lt;- "time_step"
epw$start_day_of_week
epw$start_day_of_week &lt;- "start_day_of_week"
epw$path()
epw$get_data(year = NULL, unit = FALSE, tz = Sys.timezone(), update = FALSE)
epw$set_data(data)
epw$save(path, overwrite = FALSE)
epw$clone(deep = FALSE)
epw$print()
print(epw)
</pre>
    
    <h2 class="hasAnchor" id="read"><a class="anchor" href="#read"></a>Read</h2>

    <pre>epw &lt;- read_epw(path)
</pre>
    <p><strong>Arguments</strong></p><ul>
<li><p><code>path</code>: Path of an EnergyPlus <code>EPW</code> file.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="query-and-modify-header"><a class="anchor" href="#query-and-modify-header"></a>Query and Modify Header</h2>

    <pre>epw$city
epw$city &lt;- "city"
epw$state_province
epw$state_province &lt;- "state_province"
epw$country
epw$country &lt;- "country"
epw$data_source
epw$data_source &lt;- "data_source"
epw$wmo_number
epw$wmo_number &lt;- "wmo_number"
epw$latitude
epw$latitude &lt;- "latitude"
epw$longitute
epw$longitute &lt;- "longitute"
epw$time_zone
epw$time_zone &lt;- "time_zone"
epw$elevation
epw$elevation &lt;- "elevation"
epw$time_step
epw$time_step &lt;- "time_step"
epw$start_day_of_week
epw$start_day_of_week &lt;- "start_day_of_week"
</pre>
    <p><code>$city</code>, <code>$state_province</code>, <code>$country</code>, <code>$data_source</code>, <code>$wmo_number</code>,
<code>$latitude</code>, <code>$longitute</code>, <code>$time_zone</code>, <code>$elevation</code>, <code>$time_step</code> and
<code>$start_day_of_week</code> are all active bindings, which means that you can get
the value and also set new value to it.</p>
<p><strong>NOTE</strong>: Please be super careful when trying to modify those data. Some of them
must be consistent with weather data in order to make the weather file
successfully parsed by EnergyPlus and eplusr.</p>
    
    <h2 class="hasAnchor" id="query-and-modify-data"><a class="anchor" href="#query-and-modify-data"></a>Query and Modify Data</h2>

    <pre>epw$path()
epw$get_data(year = NULL, unit = FALSE, tz = Sys.timezone(), update = FALSE)
epw$set_data(data)
</pre>
    <p><code>$path()</code> returns the path of EPW file. <code>NULL</code> if Epw is not created from
local file.</p>
<p><code>$get_data()</code> returns the core weather data in a data.table.</p>
<p><code>$set_data()</code> replaces core weather data with input data. NOTE: This feature is
experimental. There is no validation when replacing.</p>
<p><strong>Arguments</strong></p><ul>
<li><p><code>year</code>: A integer to indicate the year value in the return <code>datetime</code> column.
If <code>NULL</code>, which is the default, the year is left as it is in EPW file.</p></li>
<li><p><code>tz</code>: The time zone of Date and Time in <code>datetime</code> column. Default:
value of <code><a href='https://www.rdocumentation.org/packages/base/topics/timezones'>Sys.timezone()</a></code>.</p></li>
<li><p><code>unit</code>: If <code>TRUE</code>, units are set to all numeric columns using
<code><a href='https://www.rdocumentation.org/packages/units/topics/set_units'>units::set_units()</a></code>. Default: <code>FALSE</code>.</p></li>
<li><p><code>update</code>: If <code>TRUE</code>, not only <code>datetime</code> column, but also <code>year</code>, <code>month</code>,
<code>day</code>, <code>hour</code> and <code>minute</code> are also updated according to the input
<code>year</code> value. Default: FALSE</p></li>
<li><p><code>data</code>: A data.frame which has all required columns.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="save"><a class="anchor" href="#save"></a>Save</h2>

    <pre>epw$save(path, overwrite = FALSE)
</pre>
    <p><strong>Arguments</strong></p><ul>
<li><p><code>path</code>: A path where to save the weather file. If <code>NULL</code>, the path of the
weather file itself is used.</p></li>
<li><p><code>overwrite</code>: Whether to overwrite the file if it already exists. Default is
<code>FALSE</code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="clone"><a class="anchor" href="#clone"></a>Clone</h2>

    <pre>epw$clone(deep = FALSE)
</pre>
    <p><code>$clone()</code> copies and returns the cloned <code>Epw</code> object. Because <code>Epw</code> uses
<code>R6Class</code> under the hook which has "modify-in-place" semantics, <code>epw_2 &lt;- epw_1</code> does not copy <code>epw_1</code> at all but only create a new binding to
<code>epw_1</code>.  Modify <code>epw_1</code> will also affect <code>epw_2</code> as well, as these two
are exactly the same thing underneath. In order to create a complete
cloned copy, please use <code>$clone(deep = TRUE)</code>.</p>
<p><strong>Arguments</strong></p><ul>
<li><p><code>deep</code>: Has to be <code>TRUE</code> if a complete cloned copy is desired.</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># read an EPW file from EnergyPlus website</span>
<span class='no'>path_base</span> <span class='kw'>&lt;-</span> <span class='st'>"https://energyplus.net/weather-download"</span>
<span class='no'>path_region</span> <span class='kw'>&lt;-</span> <span class='st'>"north_and_central_america_wmo_region_4/USA/CA"</span>
<span class='no'>path_file</span> <span class='kw'>&lt;-</span> <span class='st'>"USA_CA_San.Francisco.Intl.AP.724940_TMY3/USA_CA_San.Francisco.Intl.AP.724940_TMY3.epw"</span>
<span class='no'>path_epw</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='no'>path_base</span>, <span class='no'>path_region</span>, <span class='no'>path_file</span>)
<span class='no'>epw</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='read_epw.html'>read_epw</a></span>(<span class='no'>path_epw</span>)

<span class='co'># read an EPW file distributed with EnergyPlus</span>
<span class='kw'>if</span> (<span class='fu'><a href='use_eplus.html'>is_avail_eplus</a></span>(<span class='fl'>8.8</span>)) {
    <span class='no'>epw_path</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(
        <span class='fu'><a href='use_eplus.html'>eplus_config</a></span>(<span class='fl'>8.8</span>)$<span class='no'>dir</span>,
        <span class='st'>"WeatherData"</span>,
        <span class='st'>"USA_CA_San.Francisco.Intl.AP.724940_TMY3.epw"</span>
    )
    <span class='no'>epw</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='read_epw.html'>read_epw</a></span>(<span class='no'>path_epw</span>)
}

<span class='co'># get file path</span>
<span class='no'>epw</span>$<span class='fu'>path</span>()

<span class='co'># get basic info</span>
<span class='no'>epw</span>$<span class='no'>city</span>
<span class='no'>epw</span>$<span class='no'>state_province</span>
<span class='no'>epw</span>$<span class='no'>country</span>
<span class='no'>epw</span>$<span class='no'>data_source</span>
<span class='no'>epw</span>$<span class='no'>wmo_number</span>
<span class='no'>epw</span>$<span class='no'>latitude</span>
<span class='no'>epw</span>$<span class='no'>longitude</span>
<span class='no'>epw</span>$<span class='no'>time_zone</span>
<span class='no'>epw</span>$<span class='no'>elevation</span>
<span class='no'>epw</span>$<span class='no'>time_step</span>
<span class='no'>epw</span>$<span class='no'>start_day_of_week</span>

<span class='co'># set basic info</span>
<span class='co'># NOTE: Use with caution. May mess up your weather data</span>
<span class='no'>epw</span>$<span class='no'>city</span> <span class='kw'>&lt;-</span> <span class='st'>"Chongqing"</span>
<span class='no'>epw</span>$<span class='no'>city</span>

<span class='no'>epw</span>$<span class='no'>state_province</span> <span class='kw'>&lt;-</span> <span class='st'>"Chongqing"</span>
<span class='no'>epw</span>$<span class='no'>state_province</span>

<span class='no'>epw</span>$<span class='no'>country</span> <span class='kw'>&lt;-</span> <span class='st'>"China"</span>
<span class='no'>epw</span>$<span class='no'>country</span>

<span class='no'>epw</span>$<span class='no'>data_source</span> <span class='kw'>&lt;-</span> <span class='st'>"TMY"</span>
<span class='no'>epw</span>$<span class='no'>data_source</span>

<span class='no'>epw</span>$<span class='no'>wmo_number</span> <span class='kw'>&lt;-</span> <span class='st'>"724944"</span>
<span class='no'>epw</span>$<span class='no'>wmo_number</span>

<span class='no'>epw</span>$<span class='no'>latitude</span> <span class='kw'>&lt;-</span> <span class='fl'>20.0</span>
<span class='no'>epw</span>$<span class='no'>latitude</span>

<span class='no'>epw</span>$<span class='no'>longitude</span> <span class='kw'>&lt;-</span> -<span class='fl'>120.0</span>
<span class='no'>epw</span>$<span class='no'>longitude</span>

<span class='no'>epw</span>$<span class='no'>time_zone</span> <span class='kw'>&lt;-</span> <span class='fl'>8</span>
<span class='no'>epw</span>$<span class='no'>time_zone</span>

<span class='no'>epw</span>$<span class='no'>elevation</span> <span class='kw'>&lt;-</span> <span class='fl'>100</span>
<span class='no'>epw</span>$<span class='no'>elevation</span>

<span class='no'>epw</span>$<span class='no'>time_step</span> <span class='kw'>&lt;-</span> <span class='fl'>2</span>
<span class='no'>epw</span>$<span class='no'>time_step</span>

<span class='no'>epw</span>$<span class='no'>start_day_of_week</span> <span class='kw'>&lt;-</span> <span class='st'>"Monday"</span>
<span class='no'>epw</span>$<span class='no'>start_day_of_week</span>

<span class='co'># get weather data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>())

<span class='co'># get weather data but change the year to 2018</span>
<span class='co'># the year column is not changed by default, only the returned datetime column</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2018</span>)$<span class='no'>datetime</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2018</span>)$<span class='no'>year</span>)
<span class='co'># you can force to update the year column</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2018</span>, <span class='kw'>update</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)$<span class='no'>year</span>)

<span class='co'># get weather data with units</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>unit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='co'># with units specified, you can easily perform unit conversion using units</span>
<span class='co'># package</span>
<span class='no'>t_dry_bulb</span> <span class='kw'>&lt;-</span> <span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>unit</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)$<span class='no'>dry_bulb_temperature</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/difftime'>units</a></span>(<span class='no'>t_dry_bulb</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/with'>with</a></span>(<span class='kw pkg'>units</span><span class='kw ns'>::</span><span class='no'><a href='https://www.rdocumentation.org/packages/units/topics/ud_units'>ud_units</a></span>, <span class='st'>"kelvin"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>t_dry_bulb</span>)

<span class='co'># change the time zone of datetime column in the returned weather data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/attributes'>attributes</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>()$<span class='no'>datetime</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/attributes'>attributes</a></span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>(<span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"America/Chicago"</span>)$<span class='no'>datetime</span>)

<span class='co'># change the weather data</span>
<span class='co'># NOTE: This feature is experimental. There is no validation when replacing.</span>
<span class='no'>epw</span>$<span class='fu'>set_data</span>(<span class='no'>epw</span>$<span class='fu'>get_data</span>())
<span class='co'># save the weather file</span>
<span class='no'>epw</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/save'>save</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></span>(), <span class='st'>"weather.epw"</span>))
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#details">Details</a></li>

      <li><a href="#usage">Usage</a></li>

      <li><a href="#read">Read</a></li>

      <li><a href="#query-and-modify-header">Query and Modify Header</a></li>

      <li><a href="#query-and-modify-data">Query and Modify Data</a></li>

      <li><a href="#save">Save</a></li>

      <li><a href="#clone">Clone</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Hongyuan Jia</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Hongyuan Jia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

